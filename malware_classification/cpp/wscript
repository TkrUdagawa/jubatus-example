def options(opt):
    opt.load('compiler_cxx')

def configure(conf):
  conf.env.CXXFLAGS += ['-O2', '-Wall', '-g', '-pipe']
  conf.load('compiler_cxx')

  conf.check_cfg(package = 'pficommon', args = '--cflags --libs')

  conf.check_cxx(lib = 'msgpack')
  conf.check_cxx(lib = 'jubatus_mpio')
  conf.check_cxx(lib = 'jubatus_msgpack-rpc')

def build(bld):
  bld.program(
    source = 'ml_train.cpp mist.cpp',
    target = 'ml_train',
    use = 'PFICOMMON MSGPACK JUBATUS_MPIO JUBATUS_MSGPACK-RPC',
    )

  bld.program(
    source = 'ml_classify.cpp mist.cpp',
    target = 'ml_classify',
    use = 'PFICOMMON MSGPACK JUBATUS_MPIO JUBATUS_MSGPACK-RPC',
    )

  bld.program(
    source = 'mist_check.cpp mist.cpp',
    target = 'mist_check',
    use = 'PFICOMMON MSGPACK',
    )
